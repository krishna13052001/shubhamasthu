{%extends "luckydraw/dashboard.html"%}
{%block content%}
<br><br>
<form action="validateCoupon" method="POST">
    {%csrf_token%}
    <div class="row">
        <div class="col-sm-7 form-group">
            <label for="option" class="form-label">Select Appropriate Search Option</label>
            <select name="option" id="option" class="form-control" value="0" onchange="display(this.value)">
                {% comment %} <option value="0">Search Based on Link</option> {% endcomment %}
                {% comment %} <option value="1">Search Based on Customer Bill ID</option> {% endcomment %}
                <option value="0">Search Based on Customer Mobile Number</option>
                <option value="1">Search Based on Coupon Code</option>
            </select>
        </div>
        <div class="col-sm-3 form-group" id="0" >
            <label for="mobile" class="form-label">Mobile Number</label>
            <input type="text" id="mobile" name="mobile" class="form-control">
        </div>
        <div class="col-sm-3 form-group" id="1" style="display: none;">
            <label for="couponcode" class="form-label">Coupon Code</label>
            <input type="text" id="couponcode" name="couponcode" class="form-control">
        </div>
        <div class="col-sm-2 form-group">
            <br><center><input type="submit" value="Submit" class="btn btn-primary" required></center>
        </div>
    </div>
</form>
{% if obj != None %}
    <hr width="100%">
    <center><p style="font-size: larger; color: #002366; font-style: oblique;">Customer Details</p></center>
    <hr width="100%">
    <div class="container">
        <p style="font-size: larger; color: #002366; font-style: oblique;">Coupons</p>
        <table class="table table-striped table-bordered table-hover">
            <tr>
                <th>Customer Name</th>
                <th>Bill ID</th>
                <th>Mobile Number</th>
                <th>Coupon Code</th>
                <th>Date Created</th>
            </tr>
            {%for item in obj%}
            <tr>
                <td>{{item.lucky_cards.first.name}}</td>
                <td>{{item.lucky_cards.first.bill_id}}</td>
                <td>{{item.lucky_cards.first.mobile}}</td>
                <td>{{item.code}}</td>
                <td>{{item.lucky_cards.first.date_created}}</td>
            </tr>
            {%endfor%}
        </table>
    </div>
{%endif%}
<script>
    function display(val)
    {
        switch(val){
            case "0": document.getElementById('0').style.display = 'block';
                    document.getElementById('1').style.display = 'none';
                    document.getElementById('2').style.display = 'none';
                    break;
            case "1": document.getElementById('0').style.display = 'none';
                    document.getElementById('1').style.display = 'block';
                    document.getElementById('2').style.display = 'none';
                    break;
            case "2": document.getElementById('0').style.display = 'none';
                    document.getElementById('1').style.display = 'none';
                    document.getElementById('2').style.display = 'block';
                    break;
        }
    }
</script>
{%endblock%}
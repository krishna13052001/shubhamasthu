{%load static%}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Card</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'new2.css' %}">
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script>
      window.onload = function(){
        console.log("page loaded");
        document.getElementById('download').addEventListener('click', () => {
          console.log("clicked");
          const print  = document.getElementById('print');
          html2pdf().from(print).save("cards.pdf");
        });
        console.log("page loaded images");
        document.getElementById('download-image').addEventListener('click', () => {
          console.log("clicked images");
          const print  = document.getElementById('print');
          html2canvas(print).then((canvas) => {
            const base64image = canvas.toDataURL("image/png");
            var anchor  = document.createElement('a');
            anchor.setAttribute('href', base64image);
            anchor.setAttribute('download', 'cards.png');
            anchor.click();
            anchor.remove();
          });
        });
        };
    </script>
</head>
<body>
  <div class="container inProgress">
    <div style="text-align:center"> 
      <h4 class="p-0">
        శుభాకాంక్షలు <br> 
        మీకు లభించిన మొత్తం కూపన్ల కోడ్: {{n}}<br>  
      </h4>
    </div>
    <div class="btn btn-primary" style="margin-top:10px;"  id="download"> Download </div>
    <div class="btn btn-primary" style="margin-top:10px;"  id="download-image"> Download As Image</div>
    <!---->
    <div class="progressCardsRow" id="print">
      <div class="row">
          {%for key, value  in cards.items %}
            <div class="col-12 col-md-6 col-xxl-3">
              <a href="" style="text-decoration: none; color: #000;">
                <div class="progressCard card border-0" style="position: relative;">
                  <img src="{% static 'CAR-SCHEME-1.png'%}" alt="">
                  <div class="card-header bg-white" style="position:absolute;padding: 0px;color: red;font-size: medium;font-weight: 200;">
                    <span>
                      <strong class="courseName">S. NO : {{key}}</strong>
                    </span>
                  </div>
                  <div class="row">
                    <div class="col details">
                      <p class="faculty mb-0">
                        <stong>Coupon Code: </strong>{{value.code}}
                      </p>
                    </div>
                  </div>
                </div>
              </a>
            </div>
          {% endfor %}
          {% comment %} <p>Terms and Condtionds</p> {% endcomment %}
          <div class="col-12 col-md-6 col-xxl-3">
          <div class="progressCard card border-0" style="position: relative;">
            <img src="{% static 'CAR-SCHEME-2.png'%}" alt="" >
            <div class="card-header bg-white" style="position:absolute;padding: 0px;color: red;font-size: medium;font-weight: 200;">
            </div>
          </div>
          </div>
      </div>
      <div style="text-align:center;">
        <h4 class="p-0">Congratulations - Total no of Coupon Codes {{n}}</h4>
      </div>
    </div>
  </div>
</body>
</html>


{% comment %} <script>
    $('#exampleModal').on('hidden.bs.modal', function (e) {
      window.location.reload();  
    })
</script> {% endcomment %}